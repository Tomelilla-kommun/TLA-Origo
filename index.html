<!DOCTYPE html>
<html lang="sv">
  
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1">
    <!-- On production systems a Content-Security-Policy and referrer meta-tag should be added, see below.
    The CSP should be modified with adding specific sources that should be allowed, f.e. connect-src 'self' webanalysis.example.com geospatialdata.example.com; -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src * data:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self'; style-src 'self' 'unsafe-inline'; style-src-elem 'self' 'unsafe-inline'; base-uri 'self'; form-action 'self';">
    <meta name="referrer" content="same-origin"> -->
    <title>Origo exempel</title>
    <link href="css/style.css" rel="stylesheet">
    <link href="plugins/globe/globe.css" rel="stylesheet">
    <link rel="shortcut icon" href="img/png/logo.png">
  </head>
  
  <body>
    <div id="app-wrapper">
    </div>
    <script src="js/origo.js"></script>
    <script src="plugins/globe/globe.js"></script>
    <script src="plugins/lmsearch2/js/lmsearch.min.js"></script>
    <script src="plugins/swiper/js/swiper.min.js"></script>
    <script>
      // window.OLCesium = window.Globe().globalOLCesium();
      window.Origo.layerType.THREEDTILE = window.Globe().threedtiletype();
      const origo = Origo('index.json');
      origo.on('load', (viewer) => {
        const globe = Globe({
          showGlobe: true,
          globeOnStart: true,
          deactivateControls: ['search'],
          settings: {
            depthTestAgainstTerrain: false,
            enableAtmosphere: true,
            enableGroundAtmosphere: true,
            enableFog: true,
            showSkirts: true,
            enableLighting: false,
            shadows: {
              darkness: 0.8,
              fadingEnabled: true,
              maximumDistance: 5000,
              normalOffset: true,
              size: 4096,
              softShadows: false
            },
            skyBox: {
              url: 'http://localhost:9966/plugins/globe/cesiumassets/Assets/Textures/SkyBox/',
              images: {
                pX: 'tycho2t3_80_px.jpg',
                nX: 'tycho2t3_80_mx.jpg',
                pY: 'tycho2t3_80_py.jpg',
                nY: 'tycho2t3_80_my.jpg',
                pZ: 'tycho2t3_80_pz.jpg',
                nZ: 'tycho2t3_80_mz.jpg'
              }
            }
          },
        cesiumIontoken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlMzlhOGYyNy0wNmJlLTQyN2UtYWRmOS02ZTc5ODI1Y2IxMjgiLCJpZCI6MTEyMjM2LCJpYXQiOjE3MzkyODkxMTJ9.UhHHrNp_ihRzssD5_eNWG_6MV8wndNA05nKf_hQoEAg',
          // "gltf": [
          //   {
          //     "url": "http://localhost:9966/data/origo_globe.gltf",
          //     "lat": 18.10697,
          //     "lng": 59.12514,
          //     "height": 0, // Needs heightReference to be set to NONE
          //     "heightReference": "RELATIVE_TO_TERRAIN", //https://cesium.com/learn/ion-sdk/ref-doc/global.html?classFilter=heightReference#HeightReference
          //     "animation": {
          //       "name": "SphereAction"
          //     }
          //   }
          // ],
          cesiumTerrainProvider: 'http://localhost:9966/data/terrain/',
          //cesiumIonassetIdTerrain: 1
        });
        viewer.addComponent(globe);
      });
      origo.on('load', function (viewer) {
        var lmsearch = Lmsearch({
          "geometryAttribute": "st_astext",
          "layerNameAttribute": "layer",
          "searchAttribute": "NAMN",
          "titleAttribute": "layer",
          "contentAttribute": "NAMN",
          "title": "Sökresultat",
          "hintText": "Sök adress, fastigheter...",
          "estateLookup": false,
          "estateLookupInitialState": "initial",
          "minLength": 3,
          "limit": 21,
          "maxZoomLevel": 7, 
          "municipalities": "Tomelilla",
          "showFeature": "geometryOnly",
          "urlFastighet": "https://kartor.tomelilla.se/origoserver/lm/registerenheter?lmuser=tome0001&srid=3008",
          "urlAdress": "https://kartor.tomelilla.se/origoserver/lm/addresses?lmuser=tome0001&srid=3008",
          "urlOrt": "https://kartor.tomelilla.se/origoserver/lm/placenames?lmuser=tome0001&srid=3008",
          "urlYta": "https://kartor.tomelilla.se/origoserver/lm/registerenheter/objectId/enhetsomraden?lmuser=tome0001&srid=3008",
          "urlYtaKordinat": "https://kartor.tomelilla.se/origoserver/lm/enhetsomraden?x=easting&y=northing&srid=3008",
        });
        viewer.addComponent(lmsearch);
      });
      origo.on('load', function (viewer) {
        var swiper = Swiper({
          origoConfig: '../index.json',
          circleRadius: 150,
          alwaysOnTop: false,
          initialLayer: "topowebbkartan",
          initialControl: 'swipe',
          showLayerListOnStart: true,
          tooltips: {
            swiper: 'Jämför kartvyer',
            swipeBetweenLayers: 'Jämför sida-sida',
            circleSwipe: 'Jämför med kikhål',
            layerList: 'Välj lager från lista'
          }
        });
          viewer.addComponent(swiper);
       });	
    </script>

  </body>
 
</html>
